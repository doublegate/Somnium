# ========================================
# Somnium Server Configuration
# ========================================
#
# Copy this file to .env and configure for your environment
# IMPORTANT: Never commit .env file to version control!

# --- Server Ports ---
# Port for Express REST API server
PORT=3000

# Port for WebSocket multiplayer server
MULTIPLAYER_PORT=8080

# --- Security Secrets ---
# Generate secure secrets with:
# node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"

# Secret key for JWT token signing (minimum 32 characters)
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production-min-32-chars

# Secret key for session management (minimum 32 characters)
SESSION_SECRET=another-secret-key-for-sessions-change-this-too-min-32-chars

# --- CORS Configuration ---
# Comma-separated list of allowed origins for cross-origin requests
# Examples:
#   Development: http://localhost:8000,http://localhost:8080
#   Production:  https://your-domain.com,https://www.your-domain.com
ALLOWED_ORIGINS=http://localhost:8000,http://localhost:8080

# --- File Storage ---
# Directory for user data, saves, and shared worlds (relative to server/)
STORAGE_PATH=./storage

# --- Logging Configuration ---
# Log level: error | warn | info | debug
LOG_LEVEL=info

# Log file path (relative to server/)
LOG_FILE=./logs/server.log

# --- Rate Limiting ---
# Time window for rate limiting in milliseconds (default: 15 minutes)
RATE_LIMIT_WINDOW_MS=900000

# Maximum number of requests per window per IP
RATE_LIMIT_MAX_REQUESTS=100

# --- WebSocket Configuration ---
# Heartbeat ping interval in milliseconds (default: 30 seconds)
WS_HEARTBEAT_INTERVAL=30000

# Heartbeat timeout in milliseconds (default: 5 seconds)
WS_HEARTBEAT_TIMEOUT=5000

# --- Session Configuration ---
# Session maximum age in milliseconds (default: 24 hours)
SESSION_MAX_AGE=86400000

# --- File Upload Limits ---
# Maximum save file size in megabytes
MAX_SAVE_SIZE_MB=10

# Maximum world file size in megabytes
MAX_WORLD_SIZE_MB=5

# --- Optional: Database Configuration ---
# Uncomment and configure if using PostgreSQL instead of file storage
# DATABASE_URL=postgresql://username:password@localhost:5432/somnium
# DATABASE_POOL_MIN=2
# DATABASE_POOL_MAX=10

# --- Optional: Redis Configuration ---
# Uncomment and configure if using Redis for session storage
# REDIS_URL=redis://localhost:6379
# REDIS_PASSWORD=your-redis-password
# REDIS_DB=0

# --- Optional: Email Configuration ---
# Uncomment and configure for email notifications
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_SECURE=false
# SMTP_USER=your-email@gmail.com
# SMTP_PASS=your-app-specific-password
# EMAIL_FROM=noreply@somnium.game

# --- Optional: Cloud Storage ---
# Uncomment and configure for AWS S3 storage
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key
# AWS_REGION=us-east-1
# S3_BUCKET=somnium-saves

# --- Optional: Analytics ---
# Uncomment and configure for analytics tracking
# GOOGLE_ANALYTICS_ID=UA-XXXXXXXXX-X
# MIXPANEL_TOKEN=your-mixpanel-token

# --- Development vs Production ---
# Set to 'production' for production deployments
NODE_ENV=development

# --- Optional: SSL/TLS Configuration ---
# Uncomment and configure for HTTPS
# SSL_KEY_PATH=/path/to/privkey.pem
# SSL_CERT_PATH=/path/to/fullchain.pem
# FORCE_HTTPS=true
